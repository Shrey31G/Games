<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ding Dong</title>
</head>
<style>
    * {
        padding: 0px;
        margin: 0px;
    }

    body {
        text-align: center;
        background-color: ghostwhite;
        color: black
    }

    canvas {
        background: #222;
        display: block;
        margin: auto
    }
    .classB {
        padding: 4px;
        margin: 10px;
    }
</style>

<body>
    <h1>Ping Pong Game</h1>

    <button onclick="startGame()" class="startB">Start</button>

    <canvas id="gameCanvas" width="800" height="400"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext("2d");

        const paddleWidth = 10, paddleHeight = 80;
        let playerY = (canvas.height - paddleHeight) / 2;
        let aiY = (canvas.height - paddleHeight) / 2;
        let playerSpeed = 0;

        let ballX = canvas.width / 2, ballY = canvas.height / 2;
        let ballSpeedX = 5, ballSpeedY = 3;

        function drawRect(x, y, width, height, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x,y, width, height);
        }

        function drawBall(x, y, radius, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
        }

        function update() {
            ballX += ballSpeedX;
            ballY += ballSpeedY;
            if (ballY <= 0 || ballY >= canvas.height) {
                ballSpeedY *= -1;
            }

            if (ballX <= paddleWidth && ballY >= playerY && ballY <= playerY + paddleHeight) {
                ballSpeedX *= -1;
            }

            if(ballX >= canvas.width - paddleWidth && ballY >= aiY && ballY <= aiY + paddleHeight) {
                ballSpeedX *= -1;
            }

            if(ballX < 0 || ballX > canvas.width) {
                ballX = canvas.width / 2;
                ballY = canvas.height / 2;
                ballSpeedX = 5 * (Math.random() > 0.5 ? 1 : -1);
                ballSpeedY = 3 * (Math.random() > 0.5 ? 1 : -1);
            }

            playerY += playerSpeed;
            if (playerY < 0) playerY = 0;
            if(playerY + paddleHeight > canvas.height) playerY = canvas.height - paddleHeight;

            aiY += (ballY - (aiY + paddleHeight / 2)) * 0.05;
        }

        function draw() {
            drawRect(0, 0, canvas.width, canvas.height, "black");
            drawRect(0, playerY, paddleWidth,paddleHeight, "white");
            drawRect(canvas.width - paddleWidth, aiY, paddleWidth, paddleHeight, "white");
            drawBall(ballX, ballY, 8, "white");
        }
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        window.addEventListener("keydown", (event) => {
            if(event.key === "ArrowUp") playerSpeed = -5;
            if(event.key === "ArrowDown") playerSpeed = 5;
        });
        
        window.addEventListener("keyup", (event) => {
            playerSpeed = 0;
        });
        function startGame() {
            gameLoop();
        }
    </script>
</body>

</html>